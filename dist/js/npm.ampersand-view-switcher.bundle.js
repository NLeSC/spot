(window.webpackJsonp=window.webpackJsonp||[]).push([["npm.ampersand-view-switcher"],{"253d":function(module,exports){eval("/*$AMPERSAND_VERSION*/\nfunction ViewSwitcher(el, options) {\n    options || (options = {});\n    this.el = el;\n    this.config = {\n        hide: null,\n        show: null,\n        empty: null,\n        prepend: false,\n        waitForRemove: false\n    };\n    for (var item in options) {\n        if (this.config.hasOwnProperty(item)) {\n            this.config[item] = options[item];\n        }\n    }\n    if (options.view) {\n        this._setCurrent(options.view);\n        this._render(options.view);\n    } else {\n        // call this so the empty callback gets called\n        this._onViewRemove();\n    }\n}\n\nViewSwitcher.prototype.set = function (view) {\n    var self = this;\n    var prev = this.previous = this.current;\n\n    if (prev === view) {\n        return;\n    }\n\n    if (this.config.waitForRemove) {\n        this.next = view;\n        this._hide(prev, function () {\n            if (self.next === view) {\n                delete self.next;\n                self._show(view);\n            }\n        });\n    } else {\n        this._hide(prev);\n        this._show(view);\n    }\n};\n\nViewSwitcher.prototype._setCurrent = function (view) {\n    this.current = view;\n    if (view) this._registerRemoveListener(view);\n    var emptyCb = this.config.empty;\n    if (emptyCb && !this.current) {\n        emptyCb();\n    }\n    return view;\n};\n\nViewSwitcher.prototype.clear = function (cb) {\n    this._hide(this.current, cb);\n};\n\n// If the view switcher itself is removed, remove its child to avoid memory leaks\nViewSwitcher.prototype.remove = function () {\n    if (this.current) this.current.remove();\n};\n\nViewSwitcher.prototype._show = function (view) {\n    var customShow = this.config.show;\n    this._setCurrent(view);\n    this._render(view);\n    if (customShow) customShow(view);\n};\n\nViewSwitcher.prototype._registerRemoveListener = function (view) {\n    if (view) view.once('remove', this._onViewRemove, this);\n};\n\nViewSwitcher.prototype._onViewRemove = function (view) {\n    var emptyCb = this.config.empty;\n    if (this.current === view) {\n        this.current = null;\n    }\n    if (emptyCb && !this.current) {\n        emptyCb();\n    }\n};\n\nViewSwitcher.prototype._render = function (view) {\n    if (!view.rendered) view.render({containerEl: this.el});\n    if (!view.insertSelf) {\n        if (this.config.prepend) {\n            this.el.insertBefore(view.el, this.el.firstChild);\n        } else {\n            this.el.appendChild(view.el);\n        }\n    }\n};\n\nViewSwitcher.prototype._hide = function (view, cb) {\n    var customHide = this.config.hide;\n    if (!view) return cb && cb();\n    if (customHide) {\n        if (customHide.length === 2) {\n            customHide(view, function () {\n                view.remove();\n                if (cb) cb();\n            });\n        } else {\n            customHide(view);\n            view.remove();\n            if (cb) cb();\n        }\n    } else {\n        view.remove();\n        if (cb) cb();\n    }\n};\n\n\nmodule.exports = ViewSwitcher;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzZC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hbXBlcnNhbmQtdmlldy1zd2l0Y2hlci9hbXBlcnNhbmQtdmlldy1zd2l0Y2hlci5qcz9kMzk2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qJEFNUEVSU0FORF9WRVJTSU9OKi9cbmZ1bmN0aW9uIFZpZXdTd2l0Y2hlcihlbCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICBoaWRlOiBudWxsLFxuICAgICAgICBzaG93OiBudWxsLFxuICAgICAgICBlbXB0eTogbnVsbCxcbiAgICAgICAgcHJlcGVuZDogZmFsc2UsXG4gICAgICAgIHdhaXRGb3JSZW1vdmU6IGZhbHNlXG4gICAgfTtcbiAgICBmb3IgKHZhciBpdGVtIGluIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1tpdGVtXSA9IG9wdGlvbnNbaXRlbV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudmlldykge1xuICAgICAgICB0aGlzLl9zZXRDdXJyZW50KG9wdGlvbnMudmlldyk7XG4gICAgICAgIHRoaXMuX3JlbmRlcihvcHRpb25zLnZpZXcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNhbGwgdGhpcyBzbyB0aGUgZW1wdHkgY2FsbGJhY2sgZ2V0cyBjYWxsZWRcbiAgICAgICAgdGhpcy5fb25WaWV3UmVtb3ZlKCk7XG4gICAgfVxufVxuXG5WaWV3U3dpdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2aWV3KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwcmV2ID0gdGhpcy5wcmV2aW91cyA9IHRoaXMuY3VycmVudDtcblxuICAgIGlmIChwcmV2ID09PSB2aWV3KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb25maWcud2FpdEZvclJlbW92ZSkge1xuICAgICAgICB0aGlzLm5leHQgPSB2aWV3O1xuICAgICAgICB0aGlzLl9oaWRlKHByZXYsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLm5leHQgPT09IHZpZXcpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2VsZi5uZXh0O1xuICAgICAgICAgICAgICAgIHNlbGYuX3Nob3codmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2hpZGUocHJldik7XG4gICAgICAgIHRoaXMuX3Nob3codmlldyk7XG4gICAgfVxufTtcblxuVmlld1N3aXRjaGVyLnByb3RvdHlwZS5fc2V0Q3VycmVudCA9IGZ1bmN0aW9uICh2aWV3KSB7XG4gICAgdGhpcy5jdXJyZW50ID0gdmlldztcbiAgICBpZiAodmlldykgdGhpcy5fcmVnaXN0ZXJSZW1vdmVMaXN0ZW5lcih2aWV3KTtcbiAgICB2YXIgZW1wdHlDYiA9IHRoaXMuY29uZmlnLmVtcHR5O1xuICAgIGlmIChlbXB0eUNiICYmICF0aGlzLmN1cnJlbnQpIHtcbiAgICAgICAgZW1wdHlDYigpO1xuICAgIH1cbiAgICByZXR1cm4gdmlldztcbn07XG5cblZpZXdTd2l0Y2hlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICB0aGlzLl9oaWRlKHRoaXMuY3VycmVudCwgY2IpO1xufTtcblxuLy8gSWYgdGhlIHZpZXcgc3dpdGNoZXIgaXRzZWxmIGlzIHJlbW92ZWQsIHJlbW92ZSBpdHMgY2hpbGQgdG8gYXZvaWQgbWVtb3J5IGxlYWtzXG5WaWV3U3dpdGNoZXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50KSB0aGlzLmN1cnJlbnQucmVtb3ZlKCk7XG59O1xuXG5WaWV3U3dpdGNoZXIucHJvdG90eXBlLl9zaG93ID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICB2YXIgY3VzdG9tU2hvdyA9IHRoaXMuY29uZmlnLnNob3c7XG4gICAgdGhpcy5fc2V0Q3VycmVudCh2aWV3KTtcbiAgICB0aGlzLl9yZW5kZXIodmlldyk7XG4gICAgaWYgKGN1c3RvbVNob3cpIGN1c3RvbVNob3codmlldyk7XG59O1xuXG5WaWV3U3dpdGNoZXIucHJvdG90eXBlLl9yZWdpc3RlclJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICBpZiAodmlldykgdmlldy5vbmNlKCdyZW1vdmUnLCB0aGlzLl9vblZpZXdSZW1vdmUsIHRoaXMpO1xufTtcblxuVmlld1N3aXRjaGVyLnByb3RvdHlwZS5fb25WaWV3UmVtb3ZlID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICB2YXIgZW1wdHlDYiA9IHRoaXMuY29uZmlnLmVtcHR5O1xuICAgIGlmICh0aGlzLmN1cnJlbnQgPT09IHZpZXcpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGVtcHR5Q2IgJiYgIXRoaXMuY3VycmVudCkge1xuICAgICAgICBlbXB0eUNiKCk7XG4gICAgfVxufTtcblxuVmlld1N3aXRjaGVyLnByb3RvdHlwZS5fcmVuZGVyID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICBpZiAoIXZpZXcucmVuZGVyZWQpIHZpZXcucmVuZGVyKHtjb250YWluZXJFbDogdGhpcy5lbH0pO1xuICAgIGlmICghdmlldy5pbnNlcnRTZWxmKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5wcmVwZW5kKSB7XG4gICAgICAgICAgICB0aGlzLmVsLmluc2VydEJlZm9yZSh2aWV3LmVsLCB0aGlzLmVsLmZpcnN0Q2hpbGQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh2aWV3LmVsKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblZpZXdTd2l0Y2hlci5wcm90b3R5cGUuX2hpZGUgPSBmdW5jdGlvbiAodmlldywgY2IpIHtcbiAgICB2YXIgY3VzdG9tSGlkZSA9IHRoaXMuY29uZmlnLmhpZGU7XG4gICAgaWYgKCF2aWV3KSByZXR1cm4gY2IgJiYgY2IoKTtcbiAgICBpZiAoY3VzdG9tSGlkZSkge1xuICAgICAgICBpZiAoY3VzdG9tSGlkZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIGN1c3RvbUhpZGUodmlldywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZpZXcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNiKSBjYigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXN0b21IaWRlKHZpZXcpO1xuICAgICAgICAgICAgdmlldy5yZW1vdmUoKTtcbiAgICAgICAgICAgIGlmIChjYikgY2IoKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXcucmVtb3ZlKCk7XG4gICAgICAgIGlmIChjYikgY2IoKTtcbiAgICB9XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gVmlld1N3aXRjaGVyO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///253d\n")}}]);